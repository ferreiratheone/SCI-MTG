<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão de Materiais</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2>Gestão de Materiais</h2>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </li>
                <li class="menu-item" data-page="materiais">
                    <i class="fas fa-box"></i>
                    <span>Materiais</span>
                </li>
                <li class="menu-item" data-page="operadores">
                    <i class="fas fa-users"></i>
                    <span>Operadores</span>
                </li>
                <li class="menu-item" data-page="entrada-saida">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Entrada/Saída</span>
                </li>
                <li class="menu-item" data-page="historico">
                    <i class="fas fa-history"></i>
                    <span>Histórico</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard" class="page active">
                <div class="page-header">
                    <h1>Dashboard</h1>
                    <p>Visão geral do sistema de gestão de materiais</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Total Materiais</span>
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-value">125</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Em Uso</span>
                            <i class="fas fa-arrow-up"></i>
                        </div>
                        <div class="stat-value text-red">2</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Em Estoque</span>
                            <i class="fas fa-warehouse"></i>
                        </div>
                        <div class="stat-value text-green">113</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-title">Operadores</span>
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-value text-blue">72</div>
                    </div>
                </div>

                <!-- Dashboard Content -->
                <div class="dashboard-grid">
                  <div class="card">
                    <div class="card-header">
                      <h3>Materiais em Uso</h3>
                      <p>Materiais atualmente em uso pelos operadores</p>
                    </div>
                    <div class="card-content" id="materialsInUseContent">
                      <div style="text-align: center; padding: 32px; color: #64748b;">
                        <i class="fas fa-box" style="font-size: 32px; margin-bottom: 12px; display: block; color: #9ca3af;"></i>
                        <p>Nenhum material em uso</p>
                        <small>Materiais em uso aparecerão aqui</small>
                      </div>
                    </div>
                  </div>

                  <div class="card">
                    <div class="card-header">
                      <h3>Últimas Movimentações</h3>
                      <p>Movimentações recentes de materiais</p>
                    </div>
                    <div class="card-content" id="recentMovementsContent">
                      <div style="text-align: center; padding: 32px; color: #64748b;">
                        <i class="fas fa-history" style="font-size: 32px; margin-bottom: 12px; display: block; color: #9ca3af;"></i>
                        <p>Nenhuma movimentação registrada</p>
                        <small>Movimentações recentes aparecerão aqui</small>
                      </div>
                    </div>
                  </div>
                </div>
            </div>

            <!-- Materiais Page -->
            <div id="materiais" class="page">
                <div class="page-header">
                    <div>
                        <h1>Materiais</h1>
                        <p>Cadastro e consulta de materiais</p>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('modalNovoMaterial')">
                        <i class="fas fa-plus"></i>
                        Novo Material
                    </button>
                </div>

                <!-- Search -->
                <div class="card">
                    <div class="card-content">
                        <div class="search-container">
                            <div class="search-input">
                                <i class="fas fa-search"></i>
                                <input type="text" id="materialSearch" placeholder="Buscar por código ou descrição...">
                            </div>
                            <button class="btn btn-outline" onclick="openModal('modalFiltros')">Filtros Avançados</button>
                        </div>
                    </div>
                </div>

                <!-- Materials Table -->
                <div class="card">
                    <div class="card-header">
                        <h3>Lista de Materiais (<span id="materialCount">126</span>)</h3>
                        <p>Gerencie todos os materiais do sistema</p>
                    </div>
                    <div class="card-content">
                        <div class="table-container">
                            <table class="data-table" id="materialsTable">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Descrição</th>
                                        <th>Status</th>
                                        <th>Última Movimentação</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="materialsTableBody">
                                    <!-- Dados serão inseridos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Operadores Page -->
            <div id="operadores" class="page">
                <div class="page-header">
                    <div>
                        <h1>Operadores</h1>
                        <p>Cadastro e consulta de operadores</p>
                    </div>
                    <button class="btn btn-primary" onclick="openModal('modalNovoOperador')">
                        <i class="fas fa-plus"></i>
                        Novo Operador
                    </button>
                </div>

                <!-- Search -->
                <div class="card">
                    <div class="card-content">
                        <div class="search-container">
                            <div class="search-input">
                                <i class="fas fa-search"></i>
                                <input type="text" id="operatorSearch" placeholder="Buscar por registro ou nome do operador...">
                            </div>
                            <button class="btn btn-outline">Filtros</button>
                        </div>
                    </div>
                </div>

                <!-- Operators Table -->
                <div class="card">
                    <div class="card-header">
                        <h3>Lista de Operadores (<span id="operatorCount">72</span>)</h3>
                        <p>Gerencie todos os operadores do sistema</p>
                    </div>
                    <div class="card-content">
                        <div class="table-container">
                            <table class="data-table" id="operatorsTable">
                                <thead>
                                    <tr>
                                        <th>Registro</th>
                                        <th>Nome</th>
                                        <th>Status</th>
                                        <th>Materiais em Uso</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="operatorsTableBody">
                                    <!-- Dados serão inseridos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Entrada/Saída Page -->
            <div id="entrada-saida" class="page">
                <div class="page-header">
                    <h1>Controle de Entrada/Saída</h1>
                    <p>Registre a movimentação de materiais</p>
                </div>

                <div class="entrada-saida-grid">
                    <div class="search-section">
                        <div class="card">
                            <div class="card-header">
                                <h3>Buscar Material ou Operador</h3>
                                <p>Digite o código do material ou nome do operador</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label>Código ou Nome do Material</label>
                                    <div class="search-input">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="materialSearchEntry" placeholder="Ex: 1.1.17.001.001 ou Plástico Magnético">
                                    </div>
                                    <button class="btn btn-outline full-width">Buscar</button>
                                </div>

                                <div class="form-group">
                                    <label>Nome ou Registro do Operador</label>
                                    <div class="search-input">
                                        <i class="fas fa-search"></i>
                                        <input type="text" id="operatorSearchEntry" placeholder="Ex: Fernando Martins ou 107">
                                    </div>
                                    <button class="btn btn-outline full-width">Buscar</button>
                                </div>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-success btn-large" id="entradaBtn">
                                <i class="fas fa-arrow-down"></i>
                                ENTRADA
                            </button>
                            <button class="btn btn-warning btn-large" id="saidaBtn">
                                <i class="fas fa-arrow-up"></i>
                                SAÍDA
                            </button>
                        </div>
                    </div>

                    <div class="info-section">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-info-circle"></i> Informações</h3>
                                <p>Instruções para uso do sistema</p>
                            </div>
                            <div class="card-content">
                                <div class="info-box info-blue">
                                    <h4>Como registrar uma saída:</h4>
                                    <ol>
                                        <li>Busque o material pelo código ou descrição</li>
                                        <li>Busque o operador pelo nome ou registro</li>
                                        <li>Clique no botão "SAÍDA" para registrar</li>
                                    </ol>
                                </div>

                                <div class="info-box info-green">
                                    <h4>Como registrar uma entrada:</h4>
                                    <ol>
                                        <li>Busque o material que está sendo devolvido</li>
                                        <li>Confirme o operador que está devolvendo</li>
                                        <li>Clique no botão "ENTRADA" para registrar</li>
                                    </ol>
                                </div>

                                <div class="info-box info-yellow">
                                    <h4>Dicas importantes:</h4>
                                    <ul>
                                        <li>Verifique sempre os dados antes de confirmar</li>
                                        <li>Materiais em uso não podem ter nova saída</li>
                                        <li>Todas as movimentações são registradas no histórico</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Histórico Page -->
            <div id="historico" class="page">
                <div class="page-header">
                    <div>
                        <h1>Histórico de Movimentações</h1>
                        <p>Visualize todo o histórico de movimentações registradas</p>
                    </div>
                    <button class="btn btn-outline" onclick="exportarDados()">
                        <i class="fas fa-download"></i>
                        Exportar
                    </button>
                </div>

                <!-- Filters -->
                <div class="card">
                    <div class="card-content">
                        <div class="filters-grid">
                            <div class="search-input">
                                <i class="fas fa-search"></i>
                                <input type="text" id="historySearch" placeholder="Buscar por código, material ou operador...">
                            </div>
                            <div class="search-input">
                                <i class="fas fa-calendar"></i>
                                <input type="date" id="dateFilter">
                            </div>
                            <button class="btn btn-outline">
                                <i class="fas fa-filter"></i>
                                Mais Filtros
                            </button>
                            <button class="btn btn-primary">Buscar</button>
                        </div>
                    </div>
                </div>

                <!-- History Table -->
                <div class="card">
                    <div class="card-header">
                        <h3>Movimentações (<span id="historyCount">0</span>)</h3>
                        <p>Histórico completo de todas as movimentações</p>
                    </div>
                    <div class="card-content">
                        <div class="empty-state" id="emptyHistory">
                            <i class="fas fa-history"></i>
                            <h3>Nenhuma movimentação registrada</h3>
                            <p>Quando houver movimentações de materiais, elas aparecerão aqui.</p>
                            <button class="btn btn-primary" onclick="showPage('entrada-saida')">Registrar Movimentação</button>
                        </div>
                        <div class="table-container" id="historyTable" style="display: none;">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Descrição</th>
                                        <th>Registro</th>
                                        <th>Operador</th>
                                        <th>Data</th>
                                        <th>Operação</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="historyTableBody">
                                    <!-- Dados serão inseridos via JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modais -->
    <!-- Modal Novo Material -->
    <div id="modalNovoMaterial" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Material</h3>
                <span class="close" onclick="closeModal('modalNovoMaterial')">&times;</span>
            </div>
            <form id="formNovoMaterial">
                <div class="form-group">
                    <label for="materialCodigo">Código *</label>
                    <input type="text" id="materialCodigo" required>
                </div>
                <div class="form-group">
                    <label for="materialDescricao">Descrição *</label>
                    <input type="text" id="materialDescricao" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalNovoMaterial')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Editar Material -->
    <div id="modalEditarMaterial" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Material</h3>
                <span class="close" onclick="closeModal('modalEditarMaterial')">&times;</span>
            </div>
            <form id="formEditarMaterial">
                <input type="hidden" id="editMaterialId">
                <div class="form-group">
                    <label for="editMaterialCodigo">Código *</label>
                    <input type="text" id="editMaterialCodigo" required>
                </div>
                <div class="form-group">
                    <label for="editMaterialDescricao">Descrição *</label>
                    <input type="text" id="editMaterialDescricao" required>
                </div>
                <div class="form-group">
                    <label for="editMaterialStatus">Status *</label>
                    <select id="editMaterialStatus" required>
                        <option value="disponivel">Disponível</option>
                        <option value="em_uso">Em Uso</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalEditarMaterial')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Novo Operador -->
    <div id="modalNovoOperador" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Novo Operador</h3>
                <span class="close" onclick="closeModal('modalNovoOperador')">&times;</span>
            </div>
            <form id="formNovoOperador">
                <div class="form-group">
                    <label for="operadorRegistro">Registro *</label>
                    <input type="text" id="operadorRegistro" required>
                </div>
                <div class="form-group">
                    <label for="operadorNome">Nome Completo *</label>
                    <input type="text" id="operadorNome" required>
                </div>
                <div class="form-group">
                    <label for="operadorStatus">Status *</label>
                    <select id="operadorStatus" required>
                        <option value="">Selecione...</option>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalNovoOperador')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Editar Operador -->
    <div id="modalEditarOperador" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Operador</h3>
                <span class="close" onclick="closeModal('modalEditarOperador')">&times;</span>
            </div>
            <form id="formEditarOperador">
                <input type="hidden" id="editOperadorId">
                <div class="form-group">
                    <label for="editOperadorRegistro">Registro *</label>
                    <input type="text" id="editOperadorRegistro" required>
                </div>
                <div class="form-group">
                    <label for="editOperadorNome">Nome Completo *</label>
                    <input type="text" id="editOperadorNome" required>
                </div>
                <div class="form-group">
                    <label for="editOperadorStatus">Status *</label>
                    <select id="editOperadorStatus" required>
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalEditarOperador')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal Detalhes Operador -->
    <div id="modalDetalhesOperador" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalhes do Operador</h3>
                <span class="close" onclick="closeModal('modalDetalhesOperador')">&times;</span>
            </div>
            <div id="detalhesOperadorContent">
                <!-- Conteúdo será preenchido via JavaScript -->
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-primary" onclick="closeModal('modalDetalhesOperador')">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal Detalhes Movimentação -->
    <div id="modalDetalhesMovimentacao" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Detalhes da Movimentação</h3>
                <span class="close" onclick="closeModal('modalDetalhesMovimentacao')">&times;</span>
            </div>
            <div id="detalhesMovimentacaoContent">
                <!-- Conteúdo será preenchido via JavaScript -->
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-primary" onclick="closeModal('modalDetalhesMovimentacao')">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal Filtros Avançados -->
    <div id="modalFiltros" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Filtros Avançados</h3>
                <span class="close" onclick="closeModal('modalFiltros')">&times;</span>
            </div>
            <form id="formFiltros">
                <div class="form-group">
                    <label for="filtroStatus">Status</label>
                    <select id="filtroStatus">
                        <option value="">Todos</option>
                        <option value="disponivel">Disponível</option>
                        <option value="em_uso">Em Uso</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="filtroDataInicio">Data Início</label>
                    <input type="date" id="filtroDataInicio">
                </div>
                <div class="form-group">
                    <label for="filtroDataFim">Data Fim</label>
                    <input type="date" id="filtroDataFim">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" onclick="limparFiltros()">Limpar</button>
                    <button type="button" class="btn btn-outline" onclick="closeModal('modalFiltros')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Aplicar Filtros</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast"></div>

    <script src="script.js"></script>
</body>
</html>
